@(tasks: List[Task], projects: List[Project], taskForm: Form[Task])

@import helper._

@main("Some tasks") {
    
	<h2>Tasks (@tasks.size)</h2>
	
	<div class="row">
		<div class="span8">
			<table id="taskTable" class="table">
				<thead>
					<tr>
						<th>Project</th>
						<th>Title</th>
						<th>Comment</th>
						<th>Due Date</th>
					</tr>
				</thead>
				<tbody>
					@for(task <- tasks) {
						<tr>
							<td>@projects.find(p => p.id.get == task.projectId.get).get.name</td>
							<td>@task.title</td>
							<td>@task.comment</td>
							<td>@task.dueDate.map(date => date.format("dd/MM/yyyy")).getOrElse("N/A")</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
		
		<div class="span4">
			@form(routes.TaskController.newTask) {
				<fieldset>
					<legend>New task</legend>
					@inputText(taskForm("title"))
					@textarea(taskForm("comment"))
					@inputText(taskForm("dueDate"), 'class -> "dateField", '_label -> "Due date")
					@select(taskForm("projectId"), options = projects.map{p => p.id.get.toString -> p.name}, '_label -> "Project")
					<input type="submit" value="Create" class="btn" />
				</fieldset>
			}
		</div>
	</div>
	
	<script>
		$(function() {
			$("#taskTable").dataTable();
		
			// input type date causes different browser behaviors
			$("input.dateField").datepicker({
				dateFormat: "dd/mm/yy"
			});
		});
	</script>
}